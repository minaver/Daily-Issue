[우아한테크세미나] 190425 TDD 리팩토링 by 자바지기 박재성님

## 강의 목적
어떻게 연습하면 좀더 효과적으로 TDD와 리팩토링을 진행할 수 있을지에 대한 설명

## 1. 의식적인 연습이란?

_TDD, 리팩토링.. 과연 무조건 연습한다고 잘할 수 있을까?_
무엇인가 연습할때 무조건 많은 시간을 쏟는다고 잘해지지 않는다.

**TDD를 연습하기 위한 목적은..**
```
테스트하기 쉬운 코드와 테스트하기 어려운 코드를 구분하는 눈
테스트하기 어려운 코드를 테스트하기 쉬운 코드로 설계하는 감(sense)
```

그렇다면 이를 위해 좀 더 효과적으로 연습할 수 있는 방법은 없을까?
1)  평생동안 연습하겠다는 마음가짐으로 시작해야 한다!
2) 일정 수준에 영향을 받지 않고 꾸준히 연습하기 위해서 초기에는 장난감 프로젝트로 연습한다.

## 2. TDD, 리팩토링 적용 - 개인
### 1단계 단위 테스트 연습
TDD는 테스트 코드를 먼저 만든다는 개념이기에 처음 시작으로 접하기 어렵다. 그러므로 단위 테스트부터 시작하는것이 좋다.
Input, Output이 명확한 코드가 단위테스트를 연습하기 좋다.

### 2단계 TDD 연습하기
난이도가 낮은 자신에게 익숙한 문제로 시작하는 것을 추천
UI, DB에 의존 관계를 가지지 않는 요구사항으로 연습하는 것을 추천

TDD Circle of Life : _Test Fails -> Test Passes -> Refactor -> ..._
=> 대부분의 사람들은 Test Fails -> Test Passes 과정만을 반복하지만, 여기서 정말 중요한 것은 **Refactor 활동**이다.

### 3단계 메서드 분리하기(리팩토링)
객체지향 생활체조에 따른 메서드 분리

코드분리가 좋은 이유? 
코드를 분리하므로 하나의 메서드를 처음 보는 사람에게 더 이해파악이 쉬워진다.
모든 세부로직이 다 들어있는 코드를 보는것 보다 세부 로직이 모두 메서드화 되어있어 보는 사람으로 하여금 한눈에 파악할 수 있게할 수 있다. (여기서 메서드 명이 정확한 의미로 명시되있어야 할것 같다)

### 4단계 클래스 분리하기(리팩토링)
1) 일급 콜렉션을 쓴다 : Primitive 변수, 콜렉션 하나만을 가진 클래스를 만들어 해당 클래스에 해당 데이터가 가져야할 제약사항, 특성을 넣는다.
2) 클래스 안에서 인스턴스 변수를 점점 줄여나가자 : 이러면 계속해서 새로운 클래스를 만들어나갈 수 있다.

### 5단계 장난감 프로젝트로 연습하기
main 메서드를 통해 수동적으로 체크하지 않고 main 메서드 없이 TDD만으로 개발할 수 있다면 TDD를 어느정도 인지하고 있다고 할 수 있다.

### 6단계 이후 의존관계가 있는 프로젝트로 연습하기
여기서는 앞서 이야기한 
```
테스트하기 쉬운 코드와 테스트하기 어려운 코드를 구분하는 눈
테스트하기 어려운 코드를 테스트하기 쉬운 코드로 설계하는 감(sense)
```
이 굉장히 중요하다.

## 3. TDD, 리팩토링 적용 - 개인(주니어) -> 팀
_TDD, 리팩토링의 필요성을 느끼고 이를 팀에 전파하고 싶을때!_

🤔 생각해볼 점이 있음..
- 사람은 기본적으로 변화를 거부하는 성향
- 팀은 변화를 거부하는 성향이 더 강함
- 대부분의 사람들은 변화에 실패한 경험을 가지고 있음

=> 이런 경우 내가 맡은 기능 구현에 TDD, 리팩토링 적용하여 묵묵히 혼자 진행
근데 리더가 하지말라면 하지말자. 손해보는 장사가 아니다.

## 4. TDD, 리팩토링 적용 - 팀
팀장이 되어도
- 사람은 기본적으로 변화를 거부하는 성향
- 팀은 변화를 거부하는 성향이 더 강함
- 대부분의 사람들은 변화에 실패한 경험을 가지고 있음
이것들을 생각해봐야한다.

1:1 면담에서 팀원이 문제점을 이야기 할때 '어떻게 하면 될까?', '너라면 어떻게 할것 같아?' 라는 반문을 해라
-> 팀원들은 자신만의 해결책을 가지고 있다.

현재보다 조금씩 나아지고 있다는 방향성이 중요하다. -> 이러면 팀원들이 기다려주고 신뢰한다.

## 리팩토링, 클린코드를 진행하다 성능이슈가 생길 때?
하드웨어는 점점 싸지고 인건비는 점점 비싸진다. 
즉 장기적인 관점에서 일단은 가독성이 높은 방향으로 코드를 만드는 것이 중요하다 생각한다.
실질적으로 코드 로직 상에서 성능 이슈가 생기는 상황은 별로 없다. 대부분 DB나 통신 성능 이슈임 즉, 문제가 생기는 시점에서 해당 문제를 생각하면 될 것 같다.

# 배운 점 
TDD의 전반적인 개발 노하우나 방법보다는 리팩토링 및 학습 방법, 조직에 적용하는 방법에 대한 조언이 있던 강의였다. 소프트 스킬에 대한 이야기도 많이 해주셔서 원래 목적과 완전히 부합하진 않았지만 배운 점이 많은 강의였던것 같다.

## 👀⚡️ 눈과 감
```
테스트하기 쉬운 코드와 테스트하기 어려운 코드를 구분하는 눈
테스트하기 어려운 코드를 테스트하기 쉬운 코드로 설계하는 감(sense)
```
부분이 중요하다는 사실이 동감되면서 인상깊게 다가왔지만 정확하게 그 기준은 말해주지 않으셨다. 당연 이 부분은 말해준다고 되는 부분이 아닌 본인이 터득해나가야하는 부분이기에.. 따로 언급은 안하신게 아닐까 생각한다. 

## 🎨 일급 콜렉션
'일급 콜렉션을 쓴다' 는 부분도 굉장히 인상적으로 다가왔다. 일급 콜렉션을 쓰면서 
클래스를 분리하면 각 클래스별로 테스트를 할 수 있고, 이는 결론적으로 비즈니스 로직(Service) 단에서의 역할분리로 이어질 수 있으니 비즈니스 로직에서의 테스트와 일급 콜렉션에서의 테스트를 따로 진행할 수 있고, 자연스럽게 해당 테스트들은 한가지 요구사항, 도메인에 대한 테스트가 되고 결과적으로 전체적인 테스트가 쉬워지는 방향으로 갈 수 있다고 생각된다. 
```
일급 콜렉션 사용 
-> 클래스 분리 
-> 비즈니스(서비스) 로직의 과중 감소 
-> 테스트 분할 진행 가능 
-> 한가지 요구사항, 도메인에 대한 테스트 가능 
=> 쉬운 테스트 가능
```


